{
  "version": 3,
  "sources": ["../../yocto-queue/index.js", "../../p-limit/index.js"],
  "sourcesContent": ["class Node {\n\t/// value;\n\t/// next;\n\n\tconstructor(value) {\n\t\tthis.value = value;\n\n\t\t// TODO: Remove this when targeting Node.js 12.\n\t\tthis.next = undefined;\n\t}\n}\n\nclass Queue {\n\t// TODO: Use private class fields when targeting Node.js 12.\n\t// #_head;\n\t// #_tail;\n\t// #_size;\n\n\tconstructor() {\n\t\tthis.clear();\n\t}\n\n\tenqueue(value) {\n\t\tconst node = new Node(value);\n\n\t\tif (this._head) {\n\t\t\tthis._tail.next = node;\n\t\t\tthis._tail = node;\n\t\t} else {\n\t\t\tthis._head = node;\n\t\t\tthis._tail = node;\n\t\t}\n\n\t\tthis._size++;\n\t}\n\n\tdequeue() {\n\t\tconst current = this._head;\n\t\tif (!current) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._head = this._head.next;\n\t\tthis._size--;\n\t\treturn current.value;\n\t}\n\n\tclear() {\n\t\tthis._head = undefined;\n\t\tthis._tail = undefined;\n\t\tthis._size = 0;\n\t}\n\n\tget size() {\n\t\treturn this._size;\n\t}\n\n\t* [Symbol.iterator]() {\n\t\tlet current = this._head;\n\n\t\twhile (current) {\n\t\t\tyield current.value;\n\t\t\tcurrent = current.next;\n\t\t}\n\t}\n}\n\nmodule.exports = Queue;\n", "'use strict';\nconst Queue = require('yocto-queue');\n\nconst pLimit = concurrency => {\n\tif (!((Number.isInteger(concurrency) || concurrency === Infinity) && concurrency > 0)) {\n\t\tthrow new TypeError('Expected `concurrency` to be a number from 1 and up');\n\t}\n\n\tconst queue = new Queue();\n\tlet activeCount = 0;\n\n\tconst next = () => {\n\t\tactiveCount--;\n\n\t\tif (queue.size > 0) {\n\t\t\tqueue.dequeue()();\n\t\t}\n\t};\n\n\tconst run = async (fn, resolve, ...args) => {\n\t\tactiveCount++;\n\n\t\tconst result = (async () => fn(...args))();\n\n\t\tresolve(result);\n\n\t\ttry {\n\t\t\tawait result;\n\t\t} catch {}\n\n\t\tnext();\n\t};\n\n\tconst enqueue = (fn, resolve, ...args) => {\n\t\tqueue.enqueue(run.bind(null, fn, resolve, ...args));\n\n\t\t(async () => {\n\t\t\t// This function needs to wait until the next microtask before comparing\n\t\t\t// `activeCount` to `concurrency`, because `activeCount` is updated asynchronously\n\t\t\t// when the run function is dequeued and called. The comparison in the if-statement\n\t\t\t// needs to happen asynchronously as well to get an up-to-date value for `activeCount`.\n\t\t\tawait Promise.resolve();\n\n\t\t\tif (activeCount < concurrency && queue.size > 0) {\n\t\t\t\tqueue.dequeue()();\n\t\t\t}\n\t\t})();\n\t};\n\n\tconst generator = (fn, ...args) => new Promise(resolve => {\n\t\tenqueue(fn, resolve, ...args);\n\t});\n\n\tObject.defineProperties(generator, {\n\t\tactiveCount: {\n\t\t\tget: () => activeCount\n\t\t},\n\t\tpendingCount: {\n\t\t\tget: () => queue.size\n\t\t},\n\t\tclearQueue: {\n\t\t\tvalue: () => {\n\t\t\t\tqueue.clear();\n\t\t\t}\n\t\t}\n\t});\n\n\treturn generator;\n};\n\nmodule.exports = pLimit;\n"],
  "mappings": ";;;;;AAAA;AAAA;AAAA,QAAM,OAAN,MAAW;AAAA;AAAA;AAAA,MAIV,YAAY,OAAO;AAClB,aAAK,QAAQ;AAGb,aAAK,OAAO;AAAA,MACb;AAAA,IACD;AAEA,QAAM,QAAN,MAAY;AAAA;AAAA;AAAA;AAAA;AAAA,MAMX,cAAc;AACb,aAAK,MAAM;AAAA,MACZ;AAAA,MAEA,QAAQ,OAAO;AACd,cAAM,OAAO,IAAI,KAAK,KAAK;AAE3B,YAAI,KAAK,OAAO;AACf,eAAK,MAAM,OAAO;AAClB,eAAK,QAAQ;AAAA,QACd,OAAO;AACN,eAAK,QAAQ;AACb,eAAK,QAAQ;AAAA,QACd;AAEA,aAAK;AAAA,MACN;AAAA,MAEA,UAAU;AACT,cAAM,UAAU,KAAK;AACrB,YAAI,CAAC,SAAS;AACb;AAAA,QACD;AAEA,aAAK,QAAQ,KAAK,MAAM;AACxB,aAAK;AACL,eAAO,QAAQ;AAAA,MAChB;AAAA,MAEA,QAAQ;AACP,aAAK,QAAQ;AACb,aAAK,QAAQ;AACb,aAAK,QAAQ;AAAA,MACd;AAAA,MAEA,IAAI,OAAO;AACV,eAAO,KAAK;AAAA,MACb;AAAA,MAEA,EAAG,OAAO,QAAQ,IAAI;AACrB,YAAI,UAAU,KAAK;AAEnB,eAAO,SAAS;AACf,gBAAM,QAAQ;AACd,oBAAU,QAAQ;AAAA,QACnB;AAAA,MACD;AAAA,IACD;AAEA,WAAO,UAAU;AAAA;AAAA;;;ACnEjB;AAAA;AACA,QAAM,QAAQ;AAEd,QAAM,SAAS,iBAAe;AAC7B,UAAI,GAAG,OAAO,UAAU,WAAW,KAAK,gBAAgB,aAAa,cAAc,IAAI;AACtF,cAAM,IAAI,UAAU,qDAAqD;AAAA,MAC1E;AAEA,YAAM,QAAQ,IAAI,MAAM;AACxB,UAAI,cAAc;AAElB,YAAM,OAAO,MAAM;AAClB;AAEA,YAAI,MAAM,OAAO,GAAG;AACnB,gBAAM,QAAQ,EAAE;AAAA,QACjB;AAAA,MACD;AAEA,YAAM,MAAM,OAAO,IAAI,YAAY,SAAS;AAC3C;AAEA,cAAM,UAAU,YAAY,GAAG,GAAG,IAAI,GAAG;AAEzC,gBAAQ,MAAM;AAEd,YAAI;AACH,gBAAM;AAAA,QACP,QAAQ;AAAA,QAAC;AAET,aAAK;AAAA,MACN;AAEA,YAAM,UAAU,CAAC,IAAI,YAAY,SAAS;AACzC,cAAM,QAAQ,IAAI,KAAK,MAAM,IAAI,SAAS,GAAG,IAAI,CAAC;AAElD,SAAC,YAAY;AAKZ,gBAAM,QAAQ,QAAQ;AAEtB,cAAI,cAAc,eAAe,MAAM,OAAO,GAAG;AAChD,kBAAM,QAAQ,EAAE;AAAA,UACjB;AAAA,QACD,GAAG;AAAA,MACJ;AAEA,YAAM,YAAY,CAAC,OAAO,SAAS,IAAI,QAAQ,aAAW;AACzD,gBAAQ,IAAI,SAAS,GAAG,IAAI;AAAA,MAC7B,CAAC;AAED,aAAO,iBAAiB,WAAW;AAAA,QAClC,aAAa;AAAA,UACZ,KAAK,MAAM;AAAA,QACZ;AAAA,QACA,cAAc;AAAA,UACb,KAAK,MAAM,MAAM;AAAA,QAClB;AAAA,QACA,YAAY;AAAA,UACX,OAAO,MAAM;AACZ,kBAAM,MAAM;AAAA,UACb;AAAA,QACD;AAAA,MACD,CAAC;AAED,aAAO;AAAA,IACR;AAEA,WAAO,UAAU;AAAA;AAAA;",
  "names": []
}
